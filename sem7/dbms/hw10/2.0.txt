Считаем, что у нас web-приложение. 

1. Пользователю сначала предлагается выбрать рейс.
2. Проверяем, что такой рейс есть. Если нет - goto 1.
3. Предлагается выбрать действие (купить/выкупить бронь/забронировать)
4. Если действие не "купить", то нам потом понадобится пароль, просим его ввести.
5. Если действие "выкупить бронь", показываем ему его брони на выбранном рейсе. Иначе, goto 8.
6. Пользователь выбирает конкретную бронь для выкупа.
7. Исполняем запрос. Если не получилось - goto 3. Если получилось - конец сценария.
8. Показываем пользователю свободные места, он выбирает.
9. Исполняем зарпос. Если не получилось - goto 8. Если получилось - конец сценария.
